# AI Inference í†µí•© í”„ë¡œì íŠ¸ - ì‘ì—… ì§€ì‹œì„œ

## í”„ë¡œì íŠ¸ ê°œìš”

`frontend` í”„ë¡œì íŠ¸ì˜ AI ë¶„ì„ ê¸°ëŠ¥ì„ `brain_tumor_front`ì— í†µí•©í•©ë‹ˆë‹¤.

**ì°¸ê³  ë¬¸ì„œ**: `AI_Inference_Development_Plan.md`

**ê¸°ê°„**: 4ì£¼

---

## Aì—ê²Œ (í˜ì´ì§€ & ë¼ìš°íŒ… ë‹´ë‹¹)

### ì—­í• 
`brain_tumor_front` í”„ë¡œì íŠ¸ì— AI ë¶„ì„ í˜ì´ì§€ 6ê°œë¥¼ ì¶”ê°€

### ì‘ì—… ë‚´ìš©

**1ë‹¨ê³„: ë¼ìš°í„° ì„¤ì • (Week 1)**
- `src/router/routeMap.tsx`ì— 6ê°œ í˜ì´ì§€ ë§¤í•‘ ì¶”ê°€
- `src/router/AppRoutes.tsx`ì— ë™ì  ë¼ìš°íŠ¸ (`:jobId`) ì¶”ê°€

**2ë‹¨ê³„: ìŠ¤íƒ€ì¼ ì‘ì„± (Week 1)**
- `src/assets/style/ai-inference.css` ìƒì„±
- `frontend` í”„ë¡œì íŠ¸ì˜ Tailwind í´ë˜ìŠ¤ë¥¼ ìˆœìˆ˜ CSSë¡œ ë³€í™˜
- ê¸°ì¡´ CSS ë³€ìˆ˜ (`--primary`, `--bg-card` ë“±) í™œìš©

**3ë‹¨ê³„: í˜ì´ì§€ ê°œë°œ (Week 2-4)**

| í˜ì´ì§€ | URL | ìš°ì„ ìˆœìœ„ |
|--------|-----|----------|
| `M1InferencePage.tsx` | `/ai/m1` | ğŸ”´ ë†’ìŒ |
| `M1DetailPage.tsx` | `/ai/m1/:jobId` | ğŸŸ¡ ì¤‘ê°„ |
| `MGInferencePage.tsx` | `/ai/mg` | ğŸŸ¡ ì¤‘ê°„ |
| `MGDetailPage.tsx` | `/ai/mg/:jobId` | ğŸŸ¢ ë‚®ìŒ |
| `MMInferencePage.tsx` | `/ai/mm` | ğŸŸ¢ ë‚®ìŒ |
| `MMDetailPage.tsx` | `/ai/mm/:jobId` | ğŸŸ¢ ë‚®ìŒ |

### ì°¸ê³  ì½”ë“œ
- `frontend/src/pages/M1InferencePage.tsx`
- `frontend/src/pages/MGInferencePage.tsx`
- `frontend/src/pages/MMInferencePage.tsx`

### ì˜ì¡´ì„±
- Bê°€ ë§Œë“  ì»´í¬ë„ŒíŠ¸ (`SegMRIViewer`, `InferenceResult` ë“±) importí•´ì„œ ì‚¬ìš©
- Cê°€ DB ë©”ë‰´ ì¶”ê°€ ì™„ë£Œ í›„ ì‚¬ì´ë“œë°”ì— í‘œì‹œë¨

### ì‚°ì¶œë¬¼
```
src/pages/ai-inference/
â”œâ”€â”€ M1InferencePage.tsx
â”œâ”€â”€ M1DetailPage.tsx
â”œâ”€â”€ MGInferencePage.tsx
â”œâ”€â”€ MGDetailPage.tsx
â”œâ”€â”€ MMInferencePage.tsx
â”œâ”€â”€ MMDetailPage.tsx
â””â”€â”€ ai-inference.css

src/router/
â”œâ”€â”€ routeMap.tsx (ìˆ˜ì •)
â””â”€â”€ AppRoutes.tsx (ìˆ˜ì •)
```

### ì™„ë£Œ ê¸°ì¤€
- [ ] 6ê°œ í˜ì´ì§€ ëª¨ë‘ ë¼ìš°íŒ… ë™ì‘
- [ ] ê¸°ì¡´ UI ìŠ¤íƒ€ì¼ê³¼ ì¼ê´€ì„± ìœ ì§€
- [ ] Bì˜ ì»´í¬ë„ŒíŠ¸ ì •ìƒ ë Œë”ë§

---

## Bì—ê²Œ (ì»´í¬ë„ŒíŠ¸ & ì‹œê°í™” ë‹´ë‹¹)

### ì—­í• 
AI ë¶„ì„ ê²°ê³¼ë¥¼ í‘œì‹œí•  ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸ ê°œë°œ

### ì‘ì—… ë‚´ìš©

**1ë‹¨ê³„: í•µì‹¬ ì»´í¬ë„ŒíŠ¸ (Week 1) - ìš°ì„  ê°œë°œ**

| ì»´í¬ë„ŒíŠ¸ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|----------|------|----------|
| `SegMRIViewer.tsx` + `.css` | 3D MRI ì„¸ê·¸ë©˜í…Œì´ì…˜ ë·°ì–´ (Canvas) | ğŸ”´ ë†’ìŒ |
| `InferenceResult.tsx` + `.css` | M1 ê²°ê³¼ ì¹´ë“œ (Grade, IDH, MGMT, Survival) | ğŸ”´ ë†’ìŒ |

**2ë‹¨ê³„: ë³´ì¡° ì»´í¬ë„ŒíŠ¸ (Week 2)**

| ì»´í¬ë„ŒíŠ¸ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|----------|------|----------|
| `OCSTable.tsx` | OCS ì„ íƒ í…Œì´ë¸” | ğŸŸ¡ ì¤‘ê°„ |
| `MGResultViewer.tsx` + `.css` | MG ê²°ê³¼ ë·°ì–´ (íƒ­ UI) | ğŸŸ¡ ì¤‘ê°„ |
| `GeneVisualization.tsx` + `.css` | ìœ ì „ì Attention íˆíŠ¸ë§µ | ğŸŸ¡ ì¤‘ê°„ |

**3ë‹¨ê³„: í™•ì¥ ì»´í¬ë„ŒíŠ¸ (Week 3)**

| ì»´í¬ë„ŒíŠ¸ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|----------|------|----------|
| `MMResultViewer.tsx` + `.css` | MM í†µí•© ê²°ê³¼ ë·°ì–´ | ğŸŸ¢ ë‚®ìŒ |

### í•µì‹¬ ê¸°ìˆ 
- HTML5 Canvas API (MRI ë Œë”ë§)
- 3D ë³¼ë¥¨ â†’ 2D ìŠ¬ë¼ì´ìŠ¤ ë³€í™˜
- BraTS ë ˆì´ë¸” ì»¬ëŸ¬ ë§¤í•‘:
  - NCR/NET = ë¹¨ê°• (255, 0, 0)
  - ED = ì´ˆë¡ (0, 255, 0)
  - ET = íŒŒë‘ (0, 0, 255)

### ì°¸ê³  ì½”ë“œ
- `frontend/src/components/SegMRIViewer/SegMRIViewer.tsx` (665ì¤„)
- `frontend/src/components/InferenceResult.tsx`
- `frontend/src/components/MGResultViewer/MGResultViewer.tsx`
- `frontend/src/components/GeneVisualization/GeneVisualization.tsx`

### ìŠ¤íƒ€ì¼ ë³€í™˜ ê·œì¹™
Tailwind â†’ ìˆœìˆ˜ CSSë¡œ ë³€í™˜ (ê¸°ì¡´ CSS ë³€ìˆ˜ í™œìš©)
```css
.bg-white     â†’ background: var(--bg-card);
.text-gray-900 â†’ color: var(--text-main);
.rounded-lg   â†’ border-radius: 8px;
.shadow       â†’ box-shadow: 0 1px 3px rgba(0,0,0,0.1);
```

### ì‚°ì¶œë¬¼
```
src/components/ai/
â”œâ”€â”€ SegMRIViewer/
â”‚   â”œâ”€â”€ SegMRIViewer.tsx
â”‚   â””â”€â”€ SegMRIViewer.css
â”œâ”€â”€ InferenceResult/
â”‚   â”œâ”€â”€ InferenceResult.tsx
â”‚   â””â”€â”€ InferenceResult.css
â”œâ”€â”€ MGResultViewer/
â”‚   â”œâ”€â”€ MGResultViewer.tsx
â”‚   â””â”€â”€ MGResultViewer.css
â”œâ”€â”€ GeneVisualization/
â”‚   â”œâ”€â”€ GeneVisualization.tsx
â”‚   â””â”€â”€ GeneVisualization.css
â””â”€â”€ MMResultViewer/
    â”œâ”€â”€ MMResultViewer.tsx
    â””â”€â”€ MMResultViewer.css

src/components/OCSTable/
â”œâ”€â”€ OCSTable.tsx
â””â”€â”€ index.ts
```

### ì™„ë£Œ ê¸°ì¤€
- [ ] SegMRIViewerì—ì„œ MRI + ì„¸ê·¸ë©˜í…Œì´ì…˜ ì˜¤ë²„ë ˆì´ ì •ìƒ ë Œë”ë§
- [ ] Axial/Sagittal/Coronal ë·° ì „í™˜ ë™ì‘
- [ ] T1/T1CE/T2/FLAIR ì±„ë„ ì„ íƒ ë™ì‘
- [ ] ë°˜ì‘í˜• ëŒ€ì‘ (768px ë¸Œë ˆì´í¬í¬ì¸íŠ¸)

---

## Cì—ê²Œ (ë°±ì—”ë“œ & ì¸í”„ë¼ ë‹´ë‹¹)

### ì—­í• 
AI ë¶„ì„ í˜ì´ì§€ê°€ ë™ì‘í•˜ë„ë¡ DB ë©”ë‰´ ì¶”ê°€ ë° API í™•ì¥

### ì‘ì—… ë‚´ìš©

**1ë‹¨ê³„: DB ë©”ë‰´ ì¶”ê°€ (Week 1 Day 1)**

```sql
-- Menu í…Œì´ë¸”ì— ì‹ ê·œ ë©”ë‰´ ì¶”ê°€
INSERT INTO menu (code, name, path, parent_code, sort_order, breadcrumb_only) VALUES
('AI_M1_INFERENCE', 'M1 MRI ë¶„ì„', '/ai/m1', 'AI', 6, false),
('AI_M1_DETAIL', 'M1 ê²°ê³¼ ìƒì„¸', '/ai/m1/:jobId', 'AI', 7, true),
('AI_MG_INFERENCE', 'MG Gene ë¶„ì„', '/ai/mg', 'AI', 8, false),
('AI_MG_DETAIL', 'MG ê²°ê³¼ ìƒì„¸', '/ai/mg/:jobId', 'AI', 9, true),
('AI_MM_INFERENCE', 'MM ë©€í‹°ëª¨ë‹¬', '/ai/mm', 'AI', 10, false),
('AI_MM_DETAIL', 'MM ê²°ê³¼ ìƒì„¸', '/ai/mm/:jobId', 'AI', 11, true);
```

**2ë‹¨ê³„: ê¶Œí•œ ì¶”ê°€ (Week 1 Day 1)**

```sql
-- Role-Menu ê¶Œí•œ ì¶”ê°€ (ADMIN, DOCTOR, SYSTEM)
INSERT INTO role_menu (role_code, menu_code) VALUES
-- ADMIN
('ADMIN', 'AI_M1_INFERENCE'), ('ADMIN', 'AI_M1_DETAIL'),
('ADMIN', 'AI_MG_INFERENCE'), ('ADMIN', 'AI_MG_DETAIL'),
('ADMIN', 'AI_MM_INFERENCE'), ('ADMIN', 'AI_MM_DETAIL'),
-- DOCTOR
('DOCTOR', 'AI_M1_INFERENCE'), ('DOCTOR', 'AI_M1_DETAIL'),
('DOCTOR', 'AI_MG_INFERENCE'), ('DOCTOR', 'AI_MG_DETAIL'),
('DOCTOR', 'AI_MM_INFERENCE'), ('DOCTOR', 'AI_MM_DETAIL'),
-- SYSTEM
('SYSTEM', 'AI_M1_INFERENCE'), ('SYSTEM', 'AI_M1_DETAIL'),
('SYSTEM', 'AI_MG_INFERENCE'), ('SYSTEM', 'AI_MG_DETAIL'),
('SYSTEM', 'AI_MM_INFERENCE'), ('SYSTEM', 'AI_MM_DETAIL');
```

**3ë‹¨ê³„: API í•¨ìˆ˜ ì¶”ê°€ (Week 1)**

`src/services/ai.api.ts`ì— ì¶”ê°€:

```typescript
// ì„¸ê·¸ë©˜í…Œì´ì…˜ ë°ì´í„° ì¡°íšŒ
export async function getSegmentationData(jobId: string) {
  const res = await api.get(`/ai/segmentation/${jobId}/`)
  return res.data
}

// Gene Expression ë°ì´í„° ì¡°íšŒ
export async function getGeneExpressionData(ocsId: number) {
  const res = await api.get(`/ai/mg/gene-expression/${ocsId}/`)
  return res.data
}

// ì¶”ë¡  ê²°ê³¼ ìƒì„¸ ì¡°íšŒ
export async function getInferenceDetail(jobId: string) {
  const res = await api.get(`/ai/requests/${jobId}/`)
  return res.data
}
```

**4ë‹¨ê³„: ë°±ì—”ë“œ API í™•ì¸ (Week 1-2)**

| ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… | í™•ì¸ì‚¬í•­ |
|------------|------|----------|
| `GET /api/ai/segmentation/:jobId/` | ì„¸ê·¸ë©˜í…Œì´ì…˜ ë°ì´í„° | 3D ë³¼ë¥¨ ë°˜í™˜ |
| `GET /api/ai/mg/gene-expression/:ocsId/` | Gene Expression | ë°œí˜„ëŸ‰ + Attention |
| `GET /api/ai/requests/:jobId/` | ì¶”ë¡  ê²°ê³¼ ìƒì„¸ | result_data í¬í•¨ |
| WebSocket `/ws/ai-inference/` | ì‹¤ì‹œê°„ ê²°ê³¼ | ë©”ì‹œì§€ íƒ€ì… í™•ì¸ |

**5ë‹¨ê³„: í†µí•© í…ŒìŠ¤íŠ¸ (Week 4)**
- í”„ë¡ íŠ¸ì—”ë“œ â†” ë°±ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸
- WebSocket ì‹¤ì‹œê°„ ì „ì†¡ í…ŒìŠ¤íŠ¸
- ê¶Œí•œë³„ ì ‘ê·¼ í…ŒìŠ¤íŠ¸

### ì‚°ì¶œë¬¼
```
src/services/
â””â”€â”€ ai.api.ts (ìˆ˜ì •)

backend/
â”œâ”€â”€ menu.sql (ì‹¤í–‰)
â””â”€â”€ api/ai/views.py (í™•ì¸/ìˆ˜ì •)
```

### ì™„ë£Œ ê¸°ì¤€
- [ ] ì‚¬ì´ë“œë°”ì— M1/MG/MM ë©”ë‰´ í‘œì‹œ
- [ ] ADMIN, DOCTOR, SYSTEM ì—­í• ë¡œ ì ‘ê·¼ ê°€ëŠ¥
- [ ] ì„¸ê·¸ë©˜í…Œì´ì…˜ API ì‘ë‹µ ì •ìƒ
- [ ] WebSocketìœ¼ë¡œ ì¶”ë¡  ê²°ê³¼ ì‹¤ì‹œê°„ ìˆ˜ì‹ 

---

## ì£¼ê°„ ë§ˆì¼ìŠ¤í†¤

| ì£¼ì°¨ | A | B | C |
|------|---|---|---|
| **Week 1** | routeMap, AppRoutes, CSS | SegMRIViewer, InferenceResult | DB ë©”ë‰´, API í•¨ìˆ˜ |
| **Week 2** | M1 í˜ì´ì§€ 2ê°œ | OCSTable, MGResultViewer | API í…ŒìŠ¤íŠ¸ |
| **Week 3** | MG í˜ì´ì§€ 2ê°œ | GeneVisualization, MMResultViewer | í†µí•© í™˜ê²½ |
| **Week 4** | MM í˜ì´ì§€ 2ê°œ | ë²„ê·¸ ìˆ˜ì •, ë°˜ì‘í˜• | í†µí•© í…ŒìŠ¤íŠ¸ |

---

## ì»¤ë®¤ë‹ˆì¼€ì´ì…˜

| ì‹œì  | ë‹´ë‹¹ì | ì „ë‹¬ ë‚´ìš© |
|------|--------|----------|
| Week 1 Day 1 | C â†’ A, B | DB ë©”ë‰´ ì¶”ê°€ ì™„ë£Œ, API ì—”ë“œí¬ì¸íŠ¸ í™•ì • |
| Week 1 Day 3 | B â†’ A | SegMRIViewer Props ì¸í„°í˜ì´ìŠ¤ ê³µìœ  |
| Week 1 Day 5 | A â†’ B, C | CSS ë³€ìˆ˜ ë° í´ë˜ìŠ¤ ë„¤ì´ë° ê·œì¹™ ê³µìœ  |
| Week 2 Day 1 | B â†’ A | InferenceResult, OCSTable ì»´í¬ë„ŒíŠ¸ ì™„ë£Œ |
| Week 3 | ì „ì²´ | ì¤‘ê°„ ë°ëª¨ ë° í”¼ë“œë°± |
| Week 4 | ì „ì²´ | í†µí•© í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì • |

---

## ê¸°ì¡´ í˜ì´ì§€ ê°œì„  (A ì¶”ê°€ ì—…ë¬´)

### ê°œìš”
ì‹ ê·œ í˜ì´ì§€ ê°œë°œê³¼ ë³‘í–‰í•˜ì—¬ ê¸°ì¡´ AI í˜ì´ì§€ 3ê°œì˜ UXë¥¼ ê°œì„ í•©ë‹ˆë‹¤.

### ëŒ€ìƒ í˜ì´ì§€

| URL | íŒŒì¼ | ê°œì„  ì‚¬í•­ |
|-----|------|----------|
| `/ai/requests` | `AIRequestListPage.tsx` | ê²€ìƒ‰, ì •ë ¬, ë‚ ì§œ í•„í„° |
| `/ai/process-status` | `AIProcessStatusPage.tsx` | ì‹œê°„ í•„í„°, ì‹¤íŒ¨ ì•Œë¦¼ |
| `/ai/models` | `AIModelsPage.tsx` | ëª¨ë¸ ìƒíƒœ, ë²„ì „ ì •ë³´ |

---

### `/ai/requests` - AI ìš”ì²­ ëª©ë¡ ê°œì„ 

**ì¶”ê°€í•  ê¸°ëŠ¥**:

1. **ê²€ìƒ‰ ê¸°ëŠ¥** (ğŸ”´ ë†’ìŒ)
   - í™˜ìëª…, ìš”ì²­IDë¡œ ê²€ìƒ‰
   ```typescript
   const [searchTerm, setSearchTerm] = useState('');
   ```

2. **ì •ë ¬ ê¸°ëŠ¥** (ğŸ”´ ë†’ìŒ)
   - ì»¬ëŸ¼ í—¤ë” í´ë¦­ ì‹œ ì •ë ¬ (ìš”ì²­ì¼, ìƒíƒœ, í™˜ìëª… ë“±)
   ```typescript
   const [sortConfig, setSortConfig] = useState({ key: 'requested_at', direction: 'desc' });
   ```

3. **ë‚ ì§œ í•„í„°** (ğŸŸ¡ ì¤‘ê°„)
   - ì˜¤ëŠ˜ / ì´ë²ˆ ì£¼ / ì´ë²ˆ ë‹¬ / ì»¤ìŠ¤í…€ ê¸°ê°„
   ```typescript
   const [dateRange, setDateRange] = useState<'today' | 'week' | 'month' | 'custom'>('today');
   ```

4. **ë‹¤ì¤‘ ì„ íƒ** (ğŸŸ¢ ë‚®ìŒ)
   - ì²´í¬ë°•ìŠ¤ë¡œ ì—¬ëŸ¬ í•­ëª© ì„ íƒ
   - ì¼ê´„ ì·¨ì†Œ/ì‚­ì œ ë²„íŠ¼

**UI ë³€ê²½**:
```
[ê²€ìƒ‰: í™˜ìëª…/ìš”ì²­ID______] [ê¸°ê°„: ì˜¤ëŠ˜ â–¼] [ìƒíƒœ â–¼] [ëª¨ë¸ â–¼]
â”‚ìš”ì²­ID â†•â”‚í™˜ì â†•â”‚ëª¨ë¸â”‚ìƒíƒœ â†•â”‚ìš°ì„ ìˆœìœ„â”‚ìš”ì²­ì¼ â†•â”‚ì²˜ë¦¬ì‹œê°„â”‚ê²°ê³¼â”‚
```

---

### `/ai/process-status` - ì²˜ë¦¬ í˜„í™© ê°œì„ 

**ì¶”ê°€í•  ê¸°ëŠ¥**:

1. **ì‹œê°„ í•„í„° êµ¬í˜„** (ğŸ”´ ë†’ìŒ)
   - í˜„ì¬ ë³€ìˆ˜ë§Œ ìˆê³  ë¯¸êµ¬í˜„ ìƒíƒœ
   ```typescript
   // ê¸°ì¡´: const [_timeRange, _setTimeRange] = useState('today');
   // ê°œì„ : ì‹¤ì œ í•„í„°ë§ ë¡œì§ ì¶”ê°€
   const getFilteredRequests = useCallback(() => {
     const startDate = getStartDateByRange(timeRange);
     return requests.filter(req => new Date(req.requested_at) >= startDate);
   }, [requests, timeRange]);
   ```

2. **ì‹¤íŒ¨ ì•Œë¦¼ ë°°ì§€** (ğŸ”´ ë†’ìŒ)
   - ì‹¤íŒ¨ ê±´ìˆ˜ì— ë¹¨ê°„ ë°°ì§€ í‘œì‹œ
   - ìƒˆë¡œìš´ ì‹¤íŒ¨ ë°œìƒ ì‹œ ê¹œë¹¡ì„ íš¨ê³¼

3. **ìë™ ìƒˆë¡œê³ ì¹¨ í† ê¸€** (ğŸŸ¢ ë‚®ìŒ)
   ```typescript
   const [autoRefresh, setAutoRefresh] = useState(true);
   ```

**UI ë³€ê²½**:
```
ê¸°ê°„: [ì˜¤ëŠ˜] [ì´ë²ˆ ì£¼] [ì´ë²ˆ ë‹¬]    [ìë™ ìƒˆë¡œê³ ì¹¨ â—]
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ëŒ€ê¸°ì¤‘â”‚ â”‚ê²€ì¦ì¤‘â”‚ â”‚ì²˜ë¦¬ì¤‘â”‚ â”‚ì™„ë£Œ  â”‚ â”‚ì‹¤íŒ¨ğŸ”´â”‚  â† ë°°ì§€ ì¶”ê°€
```

---

### `/ai/models` - ëª¨ë¸ ì •ë³´ ê°œì„ 

**ì¶”ê°€í•  ê¸°ëŠ¥**:

1. **ëª¨ë¸ ìƒíƒœ í‘œì‹œ** (ğŸ”´ ë†’ìŒ)
   - ê°€ìš© / ì ê²€ ì¤‘ / ë¹„í™œì„± ìƒíƒœ
   ```typescript
   interface ModelStatus {
     code: string;
     status: 'available' | 'maintenance' | 'unavailable';
     maintenance_until?: string;
   }
   ```

2. **ë²„ì „ ì •ë³´** (ğŸŸ¡ ì¤‘ê°„)
   - ëª¨ë¸ ë²„ì „, ìµœê·¼ ì—…ë°ì´íŠ¸ ì¼ì‹œ

3. **ì‚¬ìš© í†µê³„** (ğŸŸ¡ ì¤‘ê°„)
   - ê¸ˆì£¼ ì‚¬ìš©ëŸ‰, ì„±ê³µë¥ 

**UI ë³€ê²½**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ§  M1 - MRI ë¶„ì„            [ê°€ìš©] â­       â”‚
â”‚ ë²„ì „: v2.1.0 (2025-01-10 ì—…ë°ì´íŠ¸)          â”‚
â”‚ ê¸ˆì£¼ ì‚¬ìš©: 45ê±´ | ì„±ê³µë¥ : 89%               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ê°œì„  ì‘ì—… ì¼ì •

| ì£¼ì°¨ | ì‘ì—… ë‚´ìš© |
|------|----------|
| Week 2 | AIRequestListPage ê²€ìƒ‰/ì •ë ¬ ì¶”ê°€ |
| Week 3 | AIProcessStatusPage ì‹œê°„ í•„í„°/ì•Œë¦¼ |
| Week 4 | AIModelsPage ìƒíƒœ/ë²„ì „ + ì „ì²´ í…ŒìŠ¤íŠ¸ |

### C ì¶”ê°€ ì—…ë¬´: API í™•ì¥

```typescript
// ai.api.tsì— ì¶”ê°€

// ëª¨ë¸ ìƒíƒœ ì¡°íšŒ
export async function getModelStatus() {
  const res = await api.get('/ai/models/status/');
  return res.data;
}

// ëª¨ë¸ë³„ í†µê³„
export async function getModelStats(period: 'week' | 'month' = 'week') {
  const res = await api.get(`/ai/models/stats/?period=${period}`);
  return res.data;
}
```

### ì™„ë£Œ ê¸°ì¤€

#### AIRequestListPage
- [ ] í™˜ìëª…/ìš”ì²­ID ê²€ìƒ‰ ë™ì‘
- [ ] ì»¬ëŸ¼ í—¤ë” í´ë¦­ ì •ë ¬ ë™ì‘
- [ ] ë‚ ì§œ ë²”ìœ„ í•„í„° ë™ì‘

#### AIProcessStatusPage
- [ ] ì‹œê°„ ë²”ìœ„ í•„í„° ì‹¤ì œ ë™ì‘
- [ ] ì‹¤íŒ¨ ì¹´ë“œì— ë°°ì§€ í‘œì‹œ
- [ ] ìë™ ìƒˆë¡œê³ ì¹¨ í† ê¸€ ë™ì‘

#### AIModelsPage
- [ ] ëª¨ë¸ ìƒíƒœ (ê°€ìš©/ì ê²€ ì¤‘) í‘œì‹œ
- [ ] ë²„ì „ ì •ë³´ í‘œì‹œ
- [ ] ì‚¬ìš© í†µê³„ í‘œì‹œ (API ì—°ë™ ì‹œ)

---

## ì°¸ê³  ì½”ë“œ ê²½ë¡œ

### ê¸°ì¡´ ì™„ì„±ëœ ì»´í¬ë„ŒíŠ¸ (ì¬ì‚¬ìš© ê¶Œì¥)

| ê²½ë¡œ | ì„¤ëª… | í™œìš© |
|------|------|------|
| `src/components/AIAnalysisBlock/` | **ì™„ì„±ëœ AI ë¶„ì„ ë¸”ë¡** | M1/MG/MM íƒ­ UI, WebSocket ì—°ë™, ê²°ê³¼ í‘œì‹œ íŒ¨í„´ ì°¸ê³  |
| `src/components/ai/SegMRIViewer/` | MRI ì„¸ê·¸ë©˜í…Œì´ì…˜ ë·°ì–´ | Canvas ë Œë”ë§, base64 ë””ì½”ë”© ë¡œì§ |
| `src/components/ai/MGResultViewer/` | MG ê²°ê³¼ ë·°ì–´ | íƒ­ UI, Risk Gauge |
| `src/components/ai/GeneVisualization/` | ìœ ì „ì ë°œí˜„ ì‹œê°í™” | Attention íˆíŠ¸ë§µ |
| `src/components/ai/MMResultViewer/` | MM í†µí•© ê²°ê³¼ ë·°ì–´ | ë©€í‹°ëª¨ë‹¬ ê²°ê³¼ í‘œì‹œ |
| `src/context/AIInferenceContext.tsx` | AI ì¶”ë¡  ì „ì—­ ìƒíƒœ | `requestInference()`, `isFastAPIAvailable` |
| `src/hooks/useAIInferenceWebSocket.ts` | WebSocket í›… | ì‹¤ì‹œê°„ ê²°ê³¼ ìˆ˜ì‹  |
| `src/components/AIAnalysisPopup/` | AI ë¶„ì„ íŒì—… | íŒì—… UI íŒ¨í„´ |

### AIAnalysisBlock ì£¼ìš” íŒ¨í„´

```typescript
// 1. ì „ì—­ Context ì‚¬ìš©
const { isFastAPIAvailable, requestInference } = useAIInference()

// 2. WebSocket ì‹¤ì‹œê°„ ê²°ê³¼ ìˆ˜ì‹ 
const { lastMessage } = useAIInferenceWebSocket()

// 3. ì¶”ë¡  ìš”ì²­ íŒ¨í„´
const job = await requestInference('M1', { ocs_id: selectedId, mode: 'manual' })
if (job.cached && job.result) {
  setResult(job.result)  // ìºì‹œ íˆíŠ¸
} else {
  pollResult(job.job_id)  // í´ë§
}

// 4. ì„¸ê·¸ë©˜í…Œì´ì…˜ ë°ì´í„° ë¡œë“œ (base64 ë””ì½”ë”©)
const res = await api.get(`/ai/inferences/${jobId}/segmentation/`, {
  params: { enc: 'binary' }
})
```

### frontend (ì›ë³¸) ì°¸ê³  ì½”ë“œ

| ê²½ë¡œ | ì„¤ëª… |
|------|------|
| `frontend/src/pages/M1InferencePage.tsx` | M1 í˜ì´ì§€ ì›ë³¸ |
| `frontend/src/pages/MGInferencePage.tsx` | MG í˜ì´ì§€ ì›ë³¸ |
| `frontend/src/pages/MMInferencePage.tsx` | MM í˜ì´ì§€ ì›ë³¸ |
| `frontend/src/components/SegMRIViewer/` | MRI ë·°ì–´ ì›ë³¸ (665ì¤„) |
| `frontend/src/components/InferenceResult.tsx` | ê²°ê³¼ ì¹´ë“œ ì›ë³¸ |

---

## ì£¼ì˜ì‚¬í•­ ë° íŠ¹ì´ì‚¬í•­

### 1. ë¼ìš°íŒ… ì‹œìŠ¤í…œ

âš ï¸ **DB ê¸°ë°˜ ë©”ë‰´ ì‹œìŠ¤í…œ**
- í”„ë¡ íŠ¸ì—”ë“œ í˜ì´ì§€ ìƒì„±ë§Œìœ¼ë¡œëŠ” ì‚¬ì´ë“œë°”ì— í‘œì‹œ ì•ˆ ë¨
- **Cê°€ DB ë©”ë‰´ INSERT ì™„ë£Œ í›„** Aì˜ í˜ì´ì§€ê°€ ì‚¬ì´ë“œë°”ì— ë‚˜íƒ€ë‚¨
- `breadcrumbOnly: true` ë©”ë‰´ëŠ” ì‚¬ì´ë“œë°”ì— ì•ˆ ë³´ì´ê³  URL ì§ì ‘ ì ‘ê·¼ë§Œ ê°€ëŠ¥

### 2. ìŠ¤íƒ€ì¼ ì‹œìŠ¤í…œ ì¶©ëŒ

| í”„ë¡œì íŠ¸ | ìŠ¤íƒ€ì¼ |
|----------|--------|
| `frontend` (ì›ë³¸) | Tailwind CSS |
| `brain_tumor_front` (ëŒ€ìƒ) | ìˆœìˆ˜ CSS + CSS ë³€ìˆ˜ |

```css
/* âŒ Tailwind ê·¸ëŒ€ë¡œ ì‚¬ìš© ë¶ˆê°€ */
<div className="bg-white rounded-lg shadow p-4">

/* âœ… ë³€í™˜ í•„ìš” */
<div className="card inference-result">
```

### 3. ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ ìƒíƒœ

| ì»´í¬ë„ŒíŠ¸ | ìƒíƒœ | ë¹„ê³  |
|----------|------|------|
| `AIAnalysisBlock` | âœ… ì™„ì„± | **ì¬ì‚¬ìš© ê¶Œì¥** |
| `SegMRIViewer` | âœ… ì™„ì„± | Canvas ë Œë”ë§ ë™ì‘ |
| `MGResultViewer` | âœ… ì™„ì„± | íƒ­ UI í¬í•¨ |
| `GeneVisualization` | âœ… ì™„ì„± | íˆíŠ¸ë§µ ë™ì‘ |
| `MMResultViewer` | âœ… ì™„ì„± | í†µí•© ê²°ê³¼ í‘œì‹œ |

### 4. Import ê²½ë¡œ ì£¼ì˜

```typescript
// âŒ frontend í”„ë¡œì íŠ¸ ê²½ë¡œ (ë³µì‚¬ ì‹œ ìˆ˜ì • í•„ìš”)
import OCSTable from '../components/OCSTable'

// âœ… brain_tumor_front alias ì‚¬ìš©
import OCSTable from '@/components/OCSTable'
import { useAIInference } from '@/context/AIInferenceContext'
```

### 5. API ì—”ë“œí¬ì¸íŠ¸ í˜„í™©

| ì—”ë“œí¬ì¸íŠ¸ | ìƒíƒœ | í™•ì¸ í•„ìš” |
|------------|------|----------|
| `GET /api/ai/inferences/:jobId/` | âœ… ë™ì‘ | ì¶”ë¡  ê²°ê³¼ |
| `GET /api/ai/inferences/:jobId/segmentation/` | âœ… ë™ì‘ | ì„¸ê·¸ë©˜í…Œì´ì…˜ |
| `GET /api/ai/mg/gene-expression/:ocsId/` | âœ… ë™ì‘ | Gene ë°ì´í„° |
| `GET /api/ai/models/status/` | âŒ ì—†ìŒ | C ì‹ ê·œ ê°œë°œ |
| `GET /api/ai/models/stats/` | âŒ ì—†ìŒ | C ì‹ ê·œ ê°œë°œ |
| `POST /api/ai/infer/` | âœ… ë™ì‘ | ì¶”ë¡  ìš”ì²­ |

### 6. ê¸°ì¡´ í˜ì´ì§€ ì½”ë“œ ì´ìŠˆ

**AIProcessStatusPage.tsx (34-35ì¤„)**
```typescript
// í˜„ì¬: ë³€ìˆ˜ë§Œ ì„ ì–¸, ë¯¸ì‚¬ìš© (lint ê²½ê³ )
const [_timeRange, _setTimeRange] = useState<'today' | 'week' | 'month'>('today');

// â†’ ì‹¤ì œ í•„í„° ë¡œì§ êµ¬í˜„ í•„ìš”
```

**AIModelsPage.tsx (13-53ì¤„)**
```typescript
// í˜„ì¬: ëª¨ë¸ ì •ë³´ í•˜ë“œì½”ë”©
const MODEL_DETAILS = {
  M1: { accuracy: '92.5%', ... },  // ì‹¤ì œ ê°’ ì•„ë‹˜
};

// â†’ APIì—ì„œ ë™ì ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•¨
```

### 7. WebSocket ê´€ë¦¬

```typescript
// âš ï¸ í˜ì´ì§€ë§ˆë‹¤ WebSocket ì—°ê²°í•˜ë©´ ì¤‘ë³µ ë°œìƒ
// AIInferenceContext í†µí•´ ì¤‘ì•™ ê´€ë¦¬ ê¶Œì¥

// âœ… ê¶Œì¥ íŒ¨í„´ (AIAnalysisBlock ì°¸ê³ )
const { lastMessage } = useAIInferenceWebSocket()
const { requestInference } = useAIInference()
```

### 8. ê¶Œí•œ ì²´ê³„

| ì—­í•  | AI ë¶„ì„ ì ‘ê·¼ |
|------|-------------|
| ADMIN | âœ… ì „ì²´ |
| DOCTOR | âœ… ì „ì²´ |
| SYSTEM | âœ… ì „ì²´ |
| PATIENT | âŒ ì ‘ê·¼ ë¶ˆê°€ |

### 9. OCS ë°ì´í„° ìš”êµ¬ì‚¬í•­

| ëª¨ë¸ | í•„ìš” OCS |
|------|----------|
| M1 | RIS + MRI |
| MG | LIS + RNA_SEQ |
| MM | MRI + RNA_SEQ + PROTEIN (3ê°œ ëª¨ë‘) |

### 10. í…ŒìŠ¤íŠ¸ ì‹œ ì£¼ì˜

1. **ë¡œê·¸ì¸ í•„ìˆ˜** - ë¹„ë¡œê·¸ì¸ ì‹œ 403 ë¦¬ë‹¤ì´ë ‰íŠ¸
2. **ì—­í•  í™•ì¸** - ADMIN ë˜ëŠ” DOCTORë¡œ í…ŒìŠ¤íŠ¸
3. **OCS ë°ì´í„°** - í•´ë‹¹ ëª¨ë¸ì— ë§ëŠ” OCSê°€ CONFIRMED ìƒíƒœì—¬ì•¼ í•¨
4. **ë°±ì—”ë“œ ì„œë²„** - Django(`localhost:8000`) + FastAPI(ML ì„œë²„) ì‹¤í–‰ í™•ì¸
5. **FastAPI ìƒíƒœ** - `isFastAPIAvailable` falseë©´ ì¶”ë¡  ë¶ˆê°€
